<div>

    <h1>Edit Change Request</h1>

    <p class="formfield">
        <label for="textarea">Summary: </label>
        <textarea cols="80" rows="5" ng-model="cr.summary" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Technician: </label>
        <input type="text" ng-model="cr.technician" >
    </p>
    <p class="formfield">
        <label for="textarea">Description: </label>
        <textarea cols="80" rows="5" ng-model="cr.description" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Impact: </label>
        <textarea cols="80" rows="5" ng-model="cr.impact" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Documentation: </label>
        <textarea cols="80" rows="5" ng-model="cr.documentation" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Rationale: </label>
        <textarea cols="80" rows="3" ng-model="cr.rationale" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Implementation Steps: </label>
        <textarea cols="80" rows="5" ng-model="cr.implementation_steps" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Tests Conducted: </label>
        <textarea cols="80" rows="5" ng-model="cr.tests_conducted" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Risks: </label>
        <textarea cols="80" rows="5" ng-model="cr.risks" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Backout Plan: </label>
        <textarea cols="80" rows="5" ng-model="cr.backout_plan" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Communication Plan:  </label>
        <textarea cols="80" rows="5" ng-model="cr.communication_plan" > </textarea>
    </p>
    <p class="formfield">
        <label for="textarea">Layman Description: </label>
        <textarea cols="80" rows="5" ng-model="cr.layman_description" > </textarea>
    </p>

    <p class="formfield">
      <label for="startDate">Start Time: </label>
      <div id="startDate"> 
        <span ng-controller="DateCtrl" ng-model="cr.startTime">
            <input type="text" datepicker-popup="{{format}}" ng-model="cr.startDate" datepicker-options="dateOptions" is-open="opened">
            <button ng-click="open($event)">Select</button>
            <timepicker minute-step="10"></timepicker>
        </span>
      </div>
    </p>
    <p class="formfield">
      <label for="endDate">End Time: </label>
      <div id="endDate"> 
        <span ng-controller="DateCtrl" ng-model="cr.endTime">
            <input type="text" datepicker-popup="{{format}}" ng-model="cr.endDate" datepicker-options="dateOptions" is-open="opened">
            <button ng-click="open($event)">Select</button>
            <timepicker minute-step="10"></timepicker>
        </span>
      </div>
    </p>

    <p class="formfield">
        <label for="textarea">Priority: </label>
        <select ng-model="cr.priority">
            <option ng-repeat="p in priorities">{{p}}</option>
        </select>
    </p>

    <button ng-click="ctrl.update(cr)">Update</button>

    <div ng-controller="CollapseDemoCtrl">
        <button class="btn btn-default" ng-click="isCollapsed = !isCollapsed">Audit Trail</button>
        <div collapse="isCollapsed">
            <li ng-repeat="audit_entry in cr.audit_trail">
                On {{audit_entry.date | date}} <strong>{{audit_entry.user}}</strong> edited this request: 
                <ul>
                    <li ng-repeat="change in audit_entry.changes">
                        Changed {{change.property}} from "{{change.from}}" to "{{change.to}}"
                    </li>
                </ul>
            </li>
        </div>
    </div>
</div>
