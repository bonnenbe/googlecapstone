<div>
    <ng-include onload="ctrl.onload()" src="'/views/requestform.html'"></ng-include>

    <button ng-click="ctrl.update(cr)">Update</button>
    <!-- This div is experimental. Remove once we can check user priveleges -->
    <div ng-init="scope = { isDisabled: true }">
	
    	<button ng-hide="scope.isDisabled", ng-click="ctrl.approve(cr)", disabled="{{scope.isDisabled}}">Approve</button>
    </div>
    <div ng-controller="CollapseDemoCtrl">
        <button class="btn btn-default" ng-click="isCollapsed = !isCollapsed">Audit Trail</button>
        <div collapse="isCollapsed">
            <li ng-repeat="audit_entry in cr.audit_trail">
                On {{audit_entry.date | date}} <strong>{{audit_entry.user}}</strong> edited this request: 
                <ul>
                    <li ng-repeat="change in audit_entry.changes">
                        Changed {{change.property}} from "{{change.from}}" to "{{change.to}}"
                    </li>
                </ul>
            </li>
        </div>
    </div>
</div>
